<?php

return [

    'hint' => 'Быстрое тестирование.',

    'summary' => <<<'TEXT'
Этот mock-провайдер — детерминированная, не требующая учётных данных «песочница», чтобы отработать весь жизненный цикл webhook: создание запроса, идемпотентные переходы состояния, доставку, проверку, ретраи и обработку ошибок. Поскольку он работает без внешних зависимостей, вы можете быстро итеративно работать локально или в CI, записывать фикстуры и демонстрировать архитектурные решения (например, где размещать проверку относительно персистентности) без утечки реальных секретов.

Используйте его для симуляции типичных отказов: задержанные доставки, дублирующие отправки, события вне порядка и временные ответы 5xx, которые запускают экспоненциальный backoff. Mock также поддерживает разные «режимы подписи» (none / HMAC-SHA256 / RSA-verify stub), чтобы команда могла безопасно отрабатывать хэширование raw body, constant-time сравнение и окна по timestamp. Так вы проверите idempotency keys и таблицы дедупликации ещё до интеграции с реальным шлюзом.

Для качественной документации держите mock близким к продакшену: те же формы эндпоинтов, заголовки и коды ошибок; отличается только корень доверия. Быстро подтверждайте валидные webhooks (2xx) и выносите тяжёлую работу в фоновые задачи. Считайте payload mock недоверенным до успешной проверки — затем применяйте бизнес-правила. В итоге вы получаете быстрый feedback loop и переносимую демо-среду, которая отражает архитектуру, которую вы будете выпускать.
TEXT
    ,

    // dari view mock
    'docs' => null,

    'signature_notes' => [
        'Режимы симулятора: none / HMAC-SHA256 / RSA-verify stub; выбирайте через конфиг, чтобы тренировать пути проверки.',
        'Хэшируйте точный raw request body; сравнивайте timing-safe функцией; применяйте короткие окна против replay.',
        'Записывайте обработанные event ID для идемпотентности; быстро ACK валидным webhook (2xx) и откладывайте тяжёлую работу.',
    ],

    'example_payload' => [
        'id'       => 'evt_' . now()->timestamp,
        'type'     => 'payment.succeeded',
        'provider' => 'mock',
        'data'     => [
            'payment_id' => 'pay_mock_001',
            'amount'     => 25000,
            'currency'   => 'IDR',
            'status'     => 'succeeded',
        ],
        'sent_at'  => now()->toIso8601String(),
    ],

    'endpoints' => [
        [
            'method' => 'POST',
            'path'   => '/api/payments',
            'desc'   => __('pages.create_payment'),
        ],
        [
            'method' => 'GET',
            'path'   => '/api/payments/{id}',
            'desc'   => __('pages.get_payment'),
        ],
        [
            'method' => 'POST',
            'path'   => '/api/webhooks/mock',
            'desc'   => __('pages.receive_webhook'),
        ],
    ],
];
