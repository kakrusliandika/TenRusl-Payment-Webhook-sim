<?php

return [

    'hint' => 'إشعارات خاصة بالمنتج.',

    'summary' => <<<'TEXT'
يوفّر Payoneer Checkout إشعارات غير متزامنة (webhooks) إلى نقطة نهاية تتحكم بها، بحيث يمكن لنظامك تسوية حالة الدفع بأمان بعيدًا عن متصفح المستخدم. تتيح المنصة تحديد عنوان URL مخصّص للإشعارات واختيار أسلوب التسليم الأنسب لبنيتك—POST (مُوصى به) أو GET، مع JSON أو معاملات مُشفّرة بنمط النموذج. وبما أن مجموعة المعاملات وأنماط التوقيع/المصادقة تختلف حسب المنتج، تعامل مع إشعارات Payoneer كسطح تكامل: وثّق الرؤوس/الحقول التي تعرّف الحدث، أضف بيانات مقاومة لإعادة التشغيل حيثما توفّرت، وتحقق من الأصالة قبل تعديل الحالة.

تشغيليًا، ابدأ بعزل معالج ضيق ويدعم idempotency يقوم بتخزين سجل حدث غير قابل للتغيير ثم يعيد 2xx بسرعة. اجعل منطق الأعمال الثقيل في عمّال خلفية لتجنّب عواصف إعادة المحاولة. طبّق مفاتيح إزالة التكرار (dedup) وفرض نافذة حداثة على أي timestamp/nonce لحماية من replays أو التسليم خارج الترتيب. وعند الحاجة لمزيد من الضمان، أضف رمزًا يصدره المزوّد (أو سرًا عشوائيًا خاصًا بك) داخل عنوان URL للإشعار وتحقق منه على الخادم. أخيرًا، انشر دليل تشغيل للفريق يوضح نقاط النهاية والصيغ وأكواد الفشل وخطوات التحقق الدقيقة التي تطبقها لنسخة Payoneer الخاصة بمنتجك—واحفظه مُؤرشفًا جنبًا إلى جنب مع الشيفرة.
TEXT
    ,

    // Dari view Payoneer
    'docs' => 'https://checkoutdocs.payoneer.com/docs/create-notification-endpoints',

    'signature_notes' => [
        'اعرض نقطة نهاية مخصّصة للإشعارات (POST مُوصى به)؛ واقبل JSON أو بيانات النموذج.',
        'تحقق من الأصالة كما هو موثّق لنسخة منتجك (رمز/token أو حقول توقيع)؛ وارفض عند عدم التطابق.',
        'افرض حداثة timestamp/nonce عند توفرها واجعل المعالجة idempotent (خزّن مفتاح dedup).',
        'أقر بسرعة (2xx) وانقل العمل الثقيل إلى مهام خلفية؛ واحتفظ بسجل تدقيق دون تسجيل الأسرار.',
    ],

    'example_payload' => [
        'event' => 'checkout.transaction.completed',
        'provider' => 'payoneer',
        'data' => [
            'orderId' => 'PO-001',
            'amount' => 25000,
            'currency' => 'IDR',
            'status' => 'COMPLETED',
        ],
        'sent_at' => now()->toIso8601String(),
    ],

    'endpoints' => [
        [
            'method' => 'POST',
            'path' => '/api/payments',
            'desc' => __('pages.create_payment'),
        ],
        [
            'method' => 'GET',
            'path' => '/api/payments/{id}',
            'desc' => __('pages.get_payment'),
        ],
        [
            'method' => 'POST',
            'path' => '/api/webhooks/payoneer',
            'desc' => __('pages.receive_webhook'),
        ],
    ],
];
