# # Railway Blueprint for TenRusl Payment Webhook Simulator
# # Place at repo root and connect via "New Project > Deploy from GitHub".
# # Uses Nixpacks (no Docker required). Starts Laravel with migrations & workers.

# [build]
# builder = "NIXPACKS"
# # Install prod deps only for faster boot
# buildCommand = "composer install --no-dev --no-interaction --prefer-dist --optimize-autoloader"

# [deploy]
# # Run Laravel bootstrap, migrations, workers, then serve
# startCommand = "sh start.sh"
# healthcheckPath = "/up"
# healthcheckTimeout = 60
# restartPolicyType = "ON_FAILURE"
# numReplicas = 1


# Railway Postgres-only config for TenRusl Payment Webhook Simulator
# Deploy from GitHub in Railway. Add the Postgres plugin so DATABASE_URL is injected.

[build]
builder = "NIXPACKS"
buildCommand = "composer install --no-dev --no-interaction --prefer-dist --optimize-autoloader"

[deploy]
# Pastikan start-postgres.sh mengarah ke mode web (atau ganti jadi: sh start.sh web)
startCommand = "sh start-postgres.sh"
healthcheckPath = "/health"
healthcheckTimeout = 60
restartPolicyType = "ON_FAILURE"
numReplicas = 1
